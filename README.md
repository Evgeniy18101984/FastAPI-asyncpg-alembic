# Домашнее задание по теме "Асинхронность"


## Отчет по продажам (Описание)

Вы разрабатываете онлайн веб-приложение для генерации отчетов от сети продаж. Владельцы торговой сети 
(конечные пользователи системы) хотят оперативно получать отчеты о том как идут дела на их точках продаж, 
какая выручка, какие товары проданы и т.д. Системы внутри торговых точек (тоже конечные пользователи системы) 
должны используя ваш сервис отчитываться о совершенных продажах товаров чтобы централизованно происходил сбор таких данных. 
Продажи совершаются часто по этому имеет смысл заложить в сервис способность справляться с большими нагрузками.

### Требования

Реализуйте асинхронное веб приложение которое:

>1. обрабатывает GET-запрос на получение всех товарных позиций
>2. обрабатывает GET-запрос на получение всех магазинов
>3. обрабатывает POST-запрос с json-телом для сохранения данных о произведенной продаже (id товара + id магазина)
>4. обрабатывает GET-запрос на получение данных по топ 10 самых доходных магазинов за месяц (id + адрес + суммарная выручка)
>5. обрабатывает GET-запрос на получение данных по топ 10 самых продаваемых товаров (id + наименование + количество проданных товаров)
>6. никакие лишние эндпоинты реализовывать не требуется

напишите readme.md с кратким описанием эндпоинтов и инструкцией запуска
используйте requirements.txt для указания сторонних зависимостей и их версий
используйте postgres или sqlite в качестве базы.
используйте асинхронный веб-фреймворк на ваш выбор и асинхронный драйвер подключения к бд на ваш выбор.
в качестве ориентира модели данных можно(а можно и не) использовать приведенную ниже dbml схему (визуализировать 
ее можно инструментом dbdiagram.io). однако это не обязательно, можно разработать собственное целевое понимание 
модели данных.



Для выполнения данного задания был использован _FastAPI_, а в качестве асинхронного драйвера выбран _asyncpg_, БД - _PostgreSQL_, _alembic_ для миграции БД. 
Cозданы 3 таблицы, приложены файлы csv и dump для наполнения таблиц тестовыми данными, для проверки отработки запросов:
>1. Магазины (stores): 
```
stores = Table(
    "stores",
    metadate,
    Column("id", Integer, primary_key=True),
    Column("address", String, nullable=False),
)
```
2. Товары (product):
```
product = Table(
    "product",
    metadate,
    Column("id", Integer, primary_key=True),
    Column("product_name", String, nullable=False),
    Column("price", Float, nullable=False),
)
```
3. Продажи (sales):
```
sales = Table(
    "sales",
    metadate,
    Column("id", Integer, primary_key=True),
    Column("datetime_of_sale", DateTime),
    Column("quantity_of_goods_sold", Integer),
    Column("product_id", Integer, ForeignKey("product.id")),
    Column("stores_id", Integer, ForeignKey("stores.id")),
)
```
<img src="D:\Python\Projects\Homework_1\Диаграмма.PNG" title="Диаграмма"/>








